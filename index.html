<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head><script src="./assets/js/color-modes.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="David Mercereau">
    <title data-i18n="app-title">Choose stove mass</title>
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="./assets/css/app.css" rel="stylesheet">    
    <!-- Load mapbox -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <!-- Load the `mapbox-gl-geocoder` plugin. -->
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" type="text/css">
  </head>
  <body class="bg-body-tertiary">

    <div class="container">
      <main>
        
        <!-- Titre -->
        <div class="row text-center mt-4">
          <div class="col-12">
            <img class="d-block mx-auto mb-4" src="./assets/img/choose-mass-stove.png" alt="" width="177" height="87">
            <div id="title"><h2 data-i18n="[html]app-title">Choose your mass stove</h2></div>
            <div class="alert alert-warning" role="alert" data-i18n="[html]app-in-dev">
              Ce logiciel n'est pas terminé, il est en cours de développement...
            </div>            
            <p class="lead" data-i18n="[html]app-lead">Application that aims to help you choose the right mass stove for your home.</p>

            <div id="alert" role="alert" class="alert alert-danger"></div>
            <p class="disclamer"><b data-i18n="[html]alert-warning">Avertissement</b> : <span data-i18n="[html]app-disclamer">Les résultats sont donnés à titre indicatif, nous vous conseillons de vous rapprocher d'un <a href="https://www.afpma.pro/#carte-des-membres">artisan poêlier professionnel</a> pour une étude thermique personnalisé afin de vous orienter vers le poêle de masse qui vous conviendra le mieux. </span></p>
          </div>
        </div>

        <!-- Formulaire -->
        <form id="form-choisirsonpdm">
          <div class="row ">
            <div class="col-md-6">

              <div class="card">
                <h4 class="m-1" data-i18n="[html]form-home">Your home</h4>
              
                <!-- Surface habitable -->
                <div class="livingvolume_manuel level1 level2 level3">
                  <label for="livingspace" class="form-label" data-i18n="[html]form-livingspace-label">Living space</label>
                  <div class="input-group has-validation">
                    <input type="number" class="form-control hashchange livingvolumecalc" min="0" max="9999999" step="0.1" id="livingspace" placeholder="60" required>
                    <span class="input-group-text">m<sup>2</sup></span>
                  </div>
                </div>

                <!-- Hauteur habitable -->
                <div class="livingvolume_manuel level1 level2 level3">
                  <label for="livingheight" class="form-label" data-i18n="[html]form-livingheight-label">Living height</label>
                  <div class="input-group has-validation">
                    <input type="number" class="form-control hashchange livingvolumecalc" min="0" max="9999999" step="0.1" id="livingheight" placeholder="2.5" required>
                    <span class="input-group-text">m</span>
                  </div>
                </div>

                <!-- Volume habitable -->
                <div class="level1 level2 level3">
                  <label for="livingvolume" class="form-label" data-i18n="[html]form-livingvolume-label">Living volume</label>
                  <div class="input-group">
                    <input type="number" class="form-control hashchange" min="0" max="9999999" step="1" name="livingvolume" id="livingvolume" value="" disabled="disabled" />
                    <span class="input-group-text">m<sup>3</sup></span>
                    <div class="form-check form-switch">
                      <input class="form-check-input hashchange" type="checkbox" role="switch" id="livingvolume_auto" name="livingvolume_auto" checked>
                      <label class="form-check-label" for="livingvolume_auto" data-i18n="[html]form-auto-label">Auto</label>
                    </div>
                  </div>
                </div>

                <!-- Surface déperdition habitable -->
                <div class="level2 level3">
                  <label for="wastagesurface" class="form-label" data-i18n="[html]form-wastagesurface-label">Wastage surface</label> 
                  <div class="input-group">
                    <input type="number" class="form-control hashchange" min="0" max="9999999" step="1" name="wastagesurface" id="wastagesurface" placeholder="250" value=""  />
                    <span class="input-group-text">m<sup>2</sup></span>  
                  </div>
                  <div id="wastagesurfaceHelp" class="form-text" data-i18n="[html]form-wastagesurface-help"></div>
                </div>

                <!-- Temperature intérieur -->
                <label for="temp_indor" class="form-label" data-i18n="[html]form-temp_indor-label">Indoor temperature</label>
                <div class="input-group has-validation">
                  <input type="text" class="form-control hashchange" id="temp_indor" placeholder="18" required>
                  <span class="input-group-text"><sup>°</sup>C</span>
                </div>

                <div class="level1">
                  <label for="g" class="form-label" data-i18n="[html]form-g-label">Estimated insulation coefficient</label>
                  <select id="g" class="form-select form-control hashchange">
                    <option value="0.22" data-i18n="[html]form-g-0-22">Bio-climatic house - G=0.22</option>
                    <option value="0.3" data-i18n="[html]form-g-0-3">Very well insulated house - G=0.3</option>
                    <option value="0.5" data-i18n="[html]form-g-0-5">RT 2012 house - G=0.5</option>
                    <option value="0.8" data-i18n="[html]form-g-0-8">RT 2005 house - G=0.8</option>
                    <option value="0.9" data-i18n="[html]form-g-0-9">RT 2000 house - G=0.9</option>
                    <option value="1.1" data-i18n="[html]form-g-1-1">1980s house - G=1.1</option>
                    <option value="1.3" data-i18n="[html]form-g-1-3">1970s house - G=1.3</option>
                    <option value="1.5" data-i18n="[html]form-g-1-5">Old house thick wall not insulated - G=1.5</option>
                    <option value="1.6" data-i18n="[html]form-g-1-6">1960s buildings - G=1.6</option>
                    <option value="1.8" data-i18n="[html]form-g-1-8">Uninsulated buildings - G=1.8</option>
                    <option value="2.75" data-i18n="[html]form-g-2-75">Veranda - G=2.75</option>
                  </select>
                </div>
                

                <div class="level2">
                  <label for="ubat_global" class="form-label" data-i18n="[html]form-ubat_global-label">Estimated insulation coefficient</label>
                  <select id="ubat_global" class="form-select form-control hashchange">
                    <option value="0.15" data-i18n="[html]form-ubat_global-0-15">0.15: Passive House</option>
                    <option value="0.3" data-i18n="[html]form-ubat_global-0-3">0,3 : Maison avec une isolation exceptionnelle</option>
                    <option value="0.4" data-i18n="[html]form-ubat_global-0-4">0.4: Excellent insulation without thermal bridges</option>
                    <option value="0.6" data-i18n="[html]form-ubat_global-0-6">0.6: Excellent insulation, thermal bridge shear</option>
                    <option value="0.75"  data-i18n="[html]form-ubat_global-0-75">0.75: For houses with conventional insulation "RT2005" and built between 2007 and 2012</option>
                    <option value="0.8" data-i18n="[html]form-ubat_global-0-8">0.8: For houses with conventional insulation "RT2000" and built between 2001 and 2006</option>
                    <option value="0.95" data-i18n="[html]form-ubat_global-0-95">0.95: For houses built between 1990 and 2000</option>
                    <option value="1.15" data-i18n="[html]form-ubat_global-1-15">1.15: For houses built between 1983 and 1989</option>
                    <option value="1.4" data-itoujoursn="form-ubat_global-1-8">1.8: Uninsulated house (walls, attic) and single-glazed joinery</option>
                  </select>
                </div>

                <div class="level2">
                  <label for="venti_global" class="form-label" data-i18n="[html]form-venti_global-label">Ventilation (thermal resistance)</label>
                  <select id="venti_global" class="form-select form-control hashchange">
                    <option value="0.14" data-i18n="[html]form-venti_global-0-14">0.14 humidity controlled mechanical ventilation</option>
                    <option value="0.2" data-i18n="[html]form-venti_global-0-2">0.2 self-adjusting controlled mechanical ventilation</option>
                    <option value="0.08" data-i18n="[html]form-venti_global-0-08">0.08 dual-flow controlled mechanical ventilation</option>
                    <option value="0.2" data-i18n="[html]form-venti_global-0-2-no">0.2 no controlled mechanical ventilation</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="col-md-6">

              <div class="card">
                <div class="m-1">
                  <label for="level" class="form-label" data-i18n="[html]form-level-label">Your degree of knowledge in mass stove : </label>
                  <select id="level" name="level" class="hashchange">
                    <option value="1" data-i18n="[html]form-level-1">Beginner</option>
                    <option value="2" selected="selected" data-i18n="[html]form-level-2">Enlightened</option>
                    <option value="3" data-i18n="[html]form-level-3">Expert</option>
                  </select>
                </div>
                <p class="level1" data-i18n="[html]form-level-1-explain">The method used is the so-called 'G' method, explained in detail by <a href="https://www.uzume.fr/quelle-power-pour-mon-poele-de-masse" target="_blank">Uzume</a></p>
                <p class="level2" data-i18n="[html]form-level-2-explain">The method used is the general "Ubat" method, it works if your house is evenly insulated. Otherwise you must switch to expert mode to detail each wall</p>
                <p class="level3" data-i18n="[html]form-level-3-explain">The method used is the so-called "Ubat" method. It requires good thermal knowledge/understanding, but it is the most precise method that allows you to detail each wall of your house.</p>
                <p class="level3 alert alert-danger" ><b>Pas opérationnel, en cours de développement...</b></p>
              </div>

              <!-- Map pour temperature de base -->
              <div class="card">
                <h4 class="m-1" data-i18n="[html]form-location">Your location</h4>
                <div class="temp_base_auto">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <button class="nav-link active" id="nav-carte-tab" data-bs-toggle="tab" data-bs-target="#nav-carte" type="button" role="tab" aria-controls="nav-carte" aria-selected="true" data-i18n="[html]form-location_map-tab">Carte</button>
                      <button class="nav-link" id="nav-manuel-tab" data-bs-toggle="tab" data-bs-target="#nav-manuel" type="button" role="tab" aria-controls="nav-manuel" aria-selected="false" data-i18n="[html]form-location_manual-tab">Manuel</button>
                    </div>
                  </nav>
                  <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active mb-2" id="nav-carte" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">
                      <div id="map"></div>
                    </div>
                    <div class="m-3 tab-pane fade" id="nav-manuel" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">
                      <div class="input-group">
                        <label for="lat" class="form-label" data-i18n="[html]form-lat-label">Latitude</label>
                        <input type="number" class="form-control hashchange" min="-180" max="180" step="0.000001" name="lat" id="lat" value="" />
                      </div>
                      <div class="input-group">
                        <label for="lng" class="form-label" data-i18n="[html]form-lng-label">Longitude : </label>
                        <input type="number" class="form-control hashchange"  min="-180" max="180" step="0.000001" name="lng" id="lng" value="" />
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="level1 level2 level3 temp_base_input_group">
                    <label for="temp_base" class="form-label"><span data-i18n="[html]form-temp_base-label">Temperature de base</span> : <img src="assets/img/loading.gif" class="load" id="temp_base_load" /></label>
                    <div class="input-group">
                      <input type="number" class="form-control hashchange" min="-40" max="30" step="0.1" name="temp_base" id="temp_base" value="" disabled="disabled" />
                      <div class="form-check form-switch">
                        <input class="form-check-input hashchange" type="checkbox" role="switch" id="temp_base_auto" name="temp_base_auto" checked>
                        <label class="form-check-label" for="temp_base_auto" data-i18n="[html]form-auto-label">Auto</label>
                      </div>
                    </div>
                  </div>
                  <div class="md-3 level3 temp_base_auto">
                    <label for="temp_base_years_archive" class="form-label" data-i18n="[html]form-temp_base_years_archive-label">Année de d'archive pour la temperature de base</label>
                    <input type="number" class="form-control hashchange" min="1" max="20" step="1" name="temp_base_years_archive" id="temp_base_years_archive" value="" />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row p-3">
            <div class="col-md-3">
              <button class="w-100 btn btn-secondary btn-lg" id="reset" type="button" data-i18n="[html]form-reset-button">Reset</button>
            </div>
            <div class="col-md-9">
              <input type="hidden" id="submit_input" class="hashchange" value="0" />
              <button class="w-100 btn btn-primary btn-lg level1 level2" id="submit_button" type="submit" data-i18n="[html]form-submit-button">Choose my mass stove</button>
            </div>
          </div>
        </form>
        <!-- Résultat -->
        <div class="row" id="result">
          <div class="col-md-12">
            <h4 class="mb-3" data-i18n="[html]result-title">Result</h4>
            <p><span id="calcShowHide" class="btn btn-light btn-sm" data-i18n="[html]result-show_more">See, understand the process, the calculation</span></p>
            <div class="calcul_level1">
              <p data-i18n="[html]result-g-explain">According to the 'G' method, we are looking here for the loss of your habitat in the most unfavorable sequence of days (base temperature) of the winter (taking into account your geographical location) in order to deduce your need for heating. The formula is as follows: </p>
              <p data-i18n="[html]result-g-formule">D = DT * V * G</p>
              <ul>
                <li data-i18n="[html]result-g-formule-d">D (W): The thermal losses of the building</li>
                <li data-i18n="[html]result-g-formule-dt">DT (°C): temperature difference 'DT', between the interior of the house and the exterior, when it is cold (subtraction between the desired interior temperature and the temperature 'basic' of your region.</li>
                <ul>
                  <li data-i18n="[html]result-g-formule-dt-more">The 'base' temperature is the temperature of the 5 coldest consecutive days of the year, averaged over the last X years. Here it is meteorological data retrieved by <a href='https://framagit.org/kepon/choisirsonpdm/-/tree/main/api'>API</a>.</li>
                </ul>
                <li data-i18n="[html]result-g-formule-v">V (m<sup>3</sup>): The volume to be heated (area x height).</li>
                <li data-i18n="[html]result-g-formule-g">G: The insulation coefficient of your house.</li>
              </ul>
              <p data-i18n="[html]result-g-formule-your-case">In your case it makes us:</p>
              <p>D = (<span class="res_temp_indor">?</span> - <span class="res_temp_base">?</span>) * <span class="res_volume">?</span> * <span class="res_g">?</span> = <span class="res_level1">?</span> </p>
            </div>
            <div class="calcul_level2">
              <p data-i18n="[html]result-ubat-explain">According to the Ubat method, we are looking here for the loss of your habitat in the most unfavorable sequence of days (base temperature) in winter (taking into account your geographical location) in order to deduct your heating needs. The formula is as follows: </p>
              <p data-i18n="[html]result-ubat-formule">D = (Ubat * WS + V * Venti) * DT</p>
              <ul>
                <li data-i18n="[html]result-ubat-formule-d">D (W): The thermal losses of the building</li>
                <li data-i18n="[html]result-ubat-formule-ubat">Ubat: The insulation coefficient of your house.</li>
                <li data-i18n="[html]result-ubat-formule-ws">WS (m<sup>2</sup>) : Wastage surface</li>
                <li data-i18n="[html]result-ubat-formule-v">V (m<sup>3</sup>): The volume to be heated (area x height).</li>
                <li data-i18n="[html]result-ubat-formule-venti">Venti: The ventilation coefficient of your house (thermal resistance).</li>
                <li data-i18n="[html]result-ubat-formule-dt">DT (°C): temperature difference 'DT', between the interior of the house and the exterior, when it is cold (subtraction between the desired interior temperature and the temperature 'basic' of your region.</li>
                <ul>
                  <li data-i18n="[html]result-ubat-formule-dt-more">The 'base' temperature is the temperature of the 5 coldest consecutive days of the year, averaged over the last X years. Here it is meteorological data retrieved by <a href='https://framagit.org/kepon/choisirsonpdm/-/tree/main/api'>API</a>.</li>
                </ul>
              </ul>
              <p data-i18n="[html]result-ubat-formule-your-case">In your case it makes us:</p>
              <p>D = (<span class="res_ubat">?</span> * <span class="res_ws">?</span> + <span class="res_volume">?</span> * <span class="res_venti">?</span>) * (<span class="res_temp_indor">?</span> - <span class="res_temp_base">?</span>) = <span class="res_level2">?</span> </p>
            </div>
            <div id="deperdition"><span data-i18n="[html]result-need-explain">Your heating need is</span> <span id='resDeperditionMax'></span> kWh</div>
            <div id="route"></div>
          </div>
        </div>
      </main>
      <footer class="my-5 pt-5 text-body-secondary text-center text-small">
        <div class="locale-switcher">
          <ul>
            <li><a href="#" class="en flag" data-locale="en"><img src="assets/img/en.png" alt="EN" width="23" height="15" /></a></li>
            <li><a href="#" class="fr flag" data-locale="fr"><img src="assets/img/fr.png" alt="FR" width="23" height="15" /></a></li>
          </ul>
        </div>
        <p class="mb-1">By <a href="https://david.mercereau.info/contact/">David Mercereau</a></p>
        <ul class="list-inline">
          <li class="list-inline-item"><a href="https://framagit.org/kepon/choisirsonpdm/" data-i18n="[html]app-source">Source Code</a></li>
          <li class="list-inline-item"><a href="#" data-i18n="[html]app-legal">Legal notice / Terms of use</a></li>
          <li class="list-inline-item"><a href="https://david.mercereau.info/contact/" data-i18n="[html]app-contact">Contact</a></li>
        </ul>
      </footer>
    </div>

<!-- Parametres -->
<script src="./settings.js"></script>
<script src="./assets/js/default-settings.js"></script>
<script src="./assets/js/bootstrap.bundle.min.js"></script>
<script src="./assets/js/jquery-3.7.0.min.js"></script>
<!-- Translate -->
<script src="./assets/js/CLDRPluralRuleParser.js"></script>
<script src="./assets/js/jquery.i18n.js"></script>
<script src="./assets/js/jquery.i18n.messagestore.js"></script>
<script src="./assets/js/jquery.i18n.fallbacks.js"></script>
<script src="./assets/js/jquery.i18n.language.js"></script>
<script src="./assets/js/jquery.i18n.parser.js"></script>
<script src="./assets/js/jquery.i18n.emitter.js"></script>
<script src="./assets/js/jquery.i18n.emitter.bidi.js"></script>
<!--<script src="./assets/js/languages/ru.js"></script>-->
<script src="./assets/js/jquery.i18n.app.js"></script>
<!-- Load mapbox -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
<!-- Load the `mapbox-gl-geocoder` plugin. -->
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
<script src="./assets/js/app.js"></script>
<script src="./assets/js/app-result.js"></script>

</html>
